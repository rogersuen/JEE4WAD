<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    template="/WEB-INF/templates/template-master.xhtml">

    <ui:param name="pageTitle" value="Create New User"/>

    <ui:define name="body">
        <h2>Create New User</h2>
        <h:form id="createUserForm" styleClass="form-horizontal">
            <div class="row">
                <h:messages
                    id="messages"
                    styleClass="col-sm-4 col-sm-offset-2"
                    errorClass="alert alert-danger"
                    infoClass="alert alert-success"
                    style="list-style: none"/>
            </div>
            <div class="form-group">
                <h:outputLabel value="Email" for="email" styleClass="control-label col-sm-2"/>
                <div class="col-sm-4">
                    <h:inputText
                        id="email"
                        value="#{createUserBean.user.email}"
                        maxlength="80"
                        p:placeholder="Email"
                        styleClass="form-control">
                    </h:inputText>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-2 col-sm-offset-2">
                    <h:commandButton 
                        value="Check Availability" 
                        actionListener="#{createUserBean.checkAvailability()}"
                        styleClass="btn btn-info">
                        <f:ajax execute="email" render="email messages"/>
                    </h:commandButton>
                </div>
            </div>
            <div class="form-group">
                <h:outputLabel value="Display Name" for="displayName" styleClass="control-label col-sm-2"/>
                <div class="col-sm-4">              
                    <h:inputText
                        id="displayName"
                        value="#{createUserBean.user.displayName}"
                        maxlength="40"
                        p:placeholder="Display Name"
                        styleClass="form-control">
                    </h:inputText>
                </div>
            </div>
            <div class="form-group">
                <h:outputLabel value="Password" for="password" styleClass="control-label col-sm-2"/>
                <div class="col-sm-4">              
                    <h:inputSecret
                        id="password"
                        value="#{createUserBean.user.password}"
                        maxlength="40"
                        p:placeholder="Password"
                        styleClass="form-control">
                    </h:inputSecret>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-4 col-sm-offset-2">
                    <h:commandButton 
                        value="Save" 
                        action="#{createUserBean.createUser()}" 
                        styleClass="btn btn-primary"/>
                    <h:link value="Cancel" outcome="BrowseUsers" styleClass="btn btn-link"/>
                </div>
            </div>
        </h:form>
    </ui:define>

</ui:composition>
